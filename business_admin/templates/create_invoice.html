{% extends 'base.html' %}
{% load static %}
{% load bootstrap_tags %}
{% block meta %}

{% endblock meta %}

{% block title %}Create Invoice{% endblock title %}

{% block css %}<link rel="stylesheet" href="{% static 'css/create_invoice.css' %}">{% endblock css %}

{% block content %}
<div class="text-center">
    <h1>Create an Invoice</h1>
    <p class="font-custom">Create and invoice to send via e-mail or print for work carried out.</p>
</div>

<section class="my-5">
    <form action="{% url 'create_invoice' %}" class="row" method="POST">
        {% csrf_token %}
        <section class="col-md-8 col-12">
            <h2 class="text-center"> Customer Details</h2>
            <div class="row mt-4">
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="name" placeholder="Name" required>
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="phone_number" placeholder="Phone Number" required>
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="email" class="form-control" name="email" placeholder="E-mail" required>
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="address_line_1" placeholder="Address Line 1">
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="address_line_2" placeholder="Address Line 2">
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="town_city" placeholder="Town / City">
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="county" placeholder="County">
                </div>
                <div class="col-md-4 col-12 mb-2">
                    <input type="text" class="form-control" name="postcode" placeholder="Postcode">
                </div>
            </div>
        </section>
        <section class="col-md-4 col-12">
            <h2 class="text-center">Vehicle Details</h2>
            <div class="row mt-4">
                <div class="col-md-6 col-12 mb-2">
                    <input type="text" class="form-control" name="make" placeholder="Make" required>
                </div>
                <div class="col-md-6 col-12 mb-2">
                    <input type="text" class="form-control" name="model" placeholder="Model" required>
                </div>
                <div class="col-md-6 col-12 mb-2">
                    <input type="text" class="form-control" name="year" placeholder="Year" required>
                </div>
                <div class="col-md-6 col-12 mb-2">
                    <input type="number" class="form-control" name="mileage" placeholder="Mileage" required>
                </div>
                <div class="col-md-6 col-12 mb-2">
                    <input type="text" class="form-control" name="vrm" placeholder="VRM" required>
                </div>
            </div>
        </section>

        <section class="col-12 my-5">
            <div class="row">
                <div class="col-12">
                    <div class="table-responsive">
                        <table class="table" id="work-table">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th style="width: 125px;">Qty</th>
                                    <th style="width: 175px;">Unit Price (£)</th>
                                    <th style="width: 175px;">Line Total (£)</th>
                                    <th style="width: 50px;">Remove</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <input type="text" name="labour" value="Labour" class="form-control" readonly>
                                    </td>
                                    <td>
                                        <input type="number" name="labour-qty" class="form-control qty" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="labour-unit" class="form-control unit-price" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="labour-total" class="form-control total" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                </tr>
                                <tr data-value="1">
                                    <td>
                                        <input type="text" name="description-1" class="form-control" required>
                                    </td>
                                    <td>
                                        <input type="number" name="qty-1" class="form-control qty" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="unit-1" class="form-control unit-price" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="line-1" class="form-control total" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <div class="text-center">
                                            <i class="fas fa-trash-alt text"></i>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-value="2">
                                    <td>
                                        <input type="text" name="description-2" class="form-control" required>
                                    </td>
                                    <td>
                                        <input type="number" name="qty-2" class="form-control qty"  min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="unit-2" class="form-control unit-price"  min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="line-2" class="form-control total"  min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <div class="text-center">
                                            <i class="fas fa-trash-alt text"></i>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-value="3">
                                    <td>
                                        <input type="text" name="description-3" class="form-control" required>
                                    </td>
                                    <td>
                                        <input type="number" name="qty-3" class="form-control qty" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="unit-3" class="form-control unit-price" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <input type="number" name="line-3" class="form-control total" min="0" oninput="validity.valid||(value='');" required>
                                    </td>
                                    <td>
                                        <div class="text-center">
                                            <i class="fas fa-trash-alt"></i>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="">
                            <a class="btn btn-outline-success add-line">Add Line</a>
                        </div>
                    </div>
                </div>
                <div class="col-12 mt-3">
                    <div class="float-right">
                        <p class="font-custom f-14">Total £<span id="invoice-total">0</span></p>
                        <input type="hidden" name="invoice-total" value="0">
                    </div>
                </div>
            </div>
            
        </section>
        <section class="col-12">
            <label for="#comment" class="font-custom">Comments</label>
            <textarea name="comments" id="comments" class="form-control" cols="30" rows="10"></textarea>
        </section>
        <section class="option-btn col-12 my-5">
            <div class="text-center">
                <input type="submit" name="send-email" value="Send via E-mail" class="btn btn-outline-primary"/>
                <input type="submit" name="print" value="Print Document" class="btn btn-outline-info disabled" disabled/>
            </div>
        </section>
    </form>
</section>
{% endblock content %}

{% block js %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{% static 'js/create_invoice.js' %}"></script>
{% endblock js %}